{% extends 'site/layouts/main.html' %}

{% load static from staticfiles %}

{% block title %}
    Homepage Digital Library
{% endblock %}

{% block content %}

    <!-- Popular book -->

    <div class="popular_book" id="destinations">
        <div class="row">
            <div class="col text-center">
                <div class="section_subtitle">simply most hiring books</div>
                <div class="section_title"><h2>Popular Books</h2></div>
            </div>
        </div>
        <div class="row books_row">
            <div class="col">
                <div id="popular_book_list" class="row books_container item_grid col-md-12">
                </div>
            </div>
        </div>
    </div>

    <!-- Testimonials -->

    <div class="testimonials" id="testimonials">
        <div class="parallax_background parallax-window"
             data-parallax="scroll"
             data-image-src="{% static "images/library-background-2.jpg" %}"
             data-speed="0.8">
        </div>
        <div class="container">
            <div class="row">
                <div class="col text-center">
                    <div class="section_subtitle">simply amazing places</div>
                    <div class="section_title"><h2>Testimonials</h2></div>
                </div>
            </div>
            <div class="row testimonials_row">
                <div class="col">

                    <!-- Testimonials Slider -->
                    <div class="testimonials_slider_container">
                        <div class="owl-carousel owl-theme testimonials_slider">

                            <!-- Slide -->
                            <div class="owl-item text-center">
                                <div class="testimonial">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                    lobortis
                                    dolor. Cras placerat lectus a posuere aliquet. Curabitur quis vehicula odio.
                                </div>
                                <div class="testimonial_author">
                                    <div class="testimonial_author_content d-flex flex-row align-items-end justify-content-start">
                                        <div>john turner,</div>
                                        <div>client</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Slide -->
                            <div class="owl-item text-center">
                                <div class="testimonial">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                    lobortis
                                    dolor. Cras placerat lectus a posuere aliquet. Curabitur quis vehicula odio.
                                </div>
                                <div class="testimonial_author">
                                    <div class="testimonial_author_content d-flex flex-row align-items-end justify-content-start">
                                        <div>john turner,</div>
                                        <div>client</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Slide -->
                            <div class="owl-item text-center">
                                <div class="testimonial">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                    lobortis
                                    dolor. Cras placerat lectus a posuere aliquet. Curabitur quis vehicula odio.
                                </div>
                                <div class="testimonial_author">
                                    <div class="testimonial_author_content d-flex flex-row align-items-end justify-content-start">
                                        <div>john turner,</div>
                                        <div>client</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="test_nav">
            <ul class="d-flex flex-column align-items-end justify-content-end">
                <li><a href="#">City Breaks Clients<span>01</span></a></li>
                <li><a href="#">Cruises Clients<span>02</span></a></li>
                <li><a href="#">All Inclusive Clients<span>03</span></a></li>
            </ul>
        </div>
    </div>

    <!-- News -->

    <div class="news" id="news">
        <div class="container">
            <div class="row">
                <div class="col-xl-8">
                    <div class="news_container">

                        <!-- News Post -->
                        <div class="news_post d-flex flex-md-row flex-column align-items-start justify-content-start">
                            <div class="news_post_image"><img src="{% static "site/images/news_1.jpg" %}" alt=""></div>
                            <div class="news_post_content">
                                <div class="news_post_date d-flex flex-row align-items-end justify-content-start">
                                    <div>02</div>
                                    <div>june</div>
                                </div>
                                <div class="news_post_title"><a href="#">Best tips to travel light</a></div>
                                <div class="news_post_category">
                                    <ul>
                                        <li><a href="#">lifestyle & travel</a></li>
                                    </ul>
                                </div>
                                <div class="news_post_text">
                                    <p>Pellentesque sit amet elementum ccumsan sit amet mattis eget, tristique at leo.
                                        Vivamus massa.Tempor massa et laoreet.</p>
                                </div>
                            </div>
                        </div>

                        <!-- News Post -->
                        <div class="news_post d-flex flex-md-row flex-column align-items-start justify-content-start">
                            <div class="news_post_image"><img src="{% static "site/images/news_2.jpg" %}" alt=""></div>
                            <div class="news_post_content">
                                <div class="news_post_date d-flex flex-row align-items-end justify-content-start">
                                    <div>01</div>
                                    <div>june</div>
                                </div>
                                <div class="news_post_title"><a href="#">Best tips to travel light</a></div>
                                <div class="news_post_category">
                                    <ul>
                                        <li><a href="#">lifestyle & travel</a></li>
                                    </ul>
                                </div>
                                <div class="news_post_text">
                                    <p>Tempor massa et laoreet malesuada. Pellentesque sit amet elementum ccumsan sit
                                        amet
                                        mattis eget, tristique at leo.</p>
                                </div>
                            </div>
                        </div>

                        <!-- News Post -->
                        <div class="news_post d-flex flex-md-row flex-column align-items-start justify-content-start">
                            <div class="news_post_image"><img src="{% static "site/images/news_3.jpg" %}" alt=""></div>
                            <div class="news_post_content">
                                <div class="news_post_date d-flex flex-row align-items-end justify-content-start">
                                    <div>29</div>
                                    <div>may</div>
                                </div>
                                <div class="news_post_title"><a href="#">Best tips to travel light</a></div>
                                <div class="news_post_category">
                                    <ul>
                                        <li><a href="#">lifestyle & travel</a></li>
                                    </ul>
                                </div>
                                <div class="news_post_text">
                                    <p>Vivamus massa.Tempor massa et laoreet malesuada. Aliquam nulla nisl, accumsan sit
                                        amet mattis.</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- News Sidebar -->
                <div class="col-xl-4">
                    <div class="travello">
                        <div class="background_image"
                             style="background-image:url({% static "site/images/travello.jpg" %})"></div>
                        <div class="travello_content">
                            <div class="travello_content_inner">
                                <div></div>
                                <div></div>
                            </div>
                        </div>
                        <div class="travello_container">
                            <a href="#">
                                <div class="d-flex flex-column align-items-center justify-content-end">
                                    <span class="travello_title">Get a 20% Discount</span>
                                    <span class="travello_subtitle">Buy Your Vacation Online Now</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block footer %}
    <script>
        function get_book_item(title, year, author, publisher) {
            html = "<div class=\"book item col-md-3\">\n" +
                "                        <div class=\" book_image\">\n" +
                "                            <img src=\"/static/images/logo-IU.jpg\" alt=\"\">\n" +
                "                        </div>\n" +
                "                        <div class=\" book_content\">\n" +
                "                            <div class=\"book_title\">\n" +
                "                                <span href=\"#\">" + title +
                "                                </span>\n" +
                "                            </div>\n" +
                "                            <div class=\"book_publisher\">\n" +
                "                                <a href=\"#\">" + year + "</a> -\n" +
                "                                <a href=\"#\">" + publisher + "</a>\n" +
                "                            </div>\n" +
                "                            <div class=\"book_author\">\n" +
                "                                <a href=\"#\">" + author + "</a> -\n" +
                "                            </div>\n" +
                "                        </div>\n" +
                "                    </div>";
            return html;
        }

        $(document).ready(function () {
            $.ajax({
                url: "{% url 'get_popular_book' %}",
                type: "GET",
                datatype: "json",
                beforeSend: function () {
                    $('#popular_book_list div').remove();
                },
                success: function (response) {
                    if (response.status === 200) {
                        var popular_book_list = JSON.parse(response.data.popular_book_list);
                        console.log(popular_book_list);
                        popular_book_list.forEach(function (element) {
                            $('#popular_book_list').append(get_book_item(element.name, element.year,
                                element.author, element.publisher));
                        });
                    } else {
                    }
                }
            });
        });
    </script>
{% endblock %}
